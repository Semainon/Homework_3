### Д3 3.1. Написать скрипт, который будет спрашивать имя пользователя и на основе ввода показывать нужную строчку из /etc/passwd.

**Дополнительно:**

1. **Вывод информации из `/etc/passwd`**: 
   - Также скрипт выводит построчно:
     - **Шелл пользователя**
     - **Домашняя директория пользователя**
     - **Список групп, в которых он состоит**

2. **Изменение параметров пользователя: запрос и корректировка изменений, проверка доступности внесения изменений**: 
   - Скрипт должен спросить, что следует поменять:
     - **UID**: Если uid, то сначала проверить, доступен ли такой uid, если нет – то один раз предложить ввести заново..
     - **Домашнюю директорию**: Если домашнюю директорию, то спросить, на какую директорию следует сменить, а также следует ли перемещать домашнюю директорию.
     - **Группу**: Если группу – то следует спросить, меняем ли мы основную группу или дополнительную.

7. **Вывод итоговой команды**: 
   - После всех изменений, скрипт должен вывести на экран итоговую команду, которая будет выполнена для изменения параметров пользователя.


### Команды 

1. Создаем директорию scripts для всех скриптов в домашнем каталоге.
```bash
mkdir ~/scripts
cd ~/scripts
```
2. Создаем файл скрипта, делаем его исполняемым и запускаем.
```bash 
nano user_info.sh
chmod +x user_info.sh
./user_info.sh
```

### Создаем тестового юзера, тестируем скрипт и удаляем 
> **Примечание:**
> 
> - **Права доступа:**
> - **Права на домашнюю директорию:** По умолчанию, домашняя директория нового пользователя будет иметь права `700` (т.е. только владелец имеет право читать, записывать и выполнять). Это означает, что только сам пользователь может получить доступ к своей домашней директории.
> - **Права на файлы:** Файлы, создаваемые пользователем, будут иметь права по умолчанию, которые зависят от текущих настроек `umask`. Обычно это `644` для файлов (чтение и запись для владельца, чтение для группы и других) и `755` для директорий (чтение, запись и выполнение для владельца, чтение и выполнение для группы и других).

### Код

```bash 
nano user_info.sh
chmod +x user_info.sh
./user_info.sh
```



```bash
#!/bin/bash

# Запрос имени пользователя
read -p "Введите имя пользователя: " username

# Получение информации о пользователе
user_info=$(getent passwd "$username")

if [ -z "$user_info" ]; then
    echo "Пользователь $username не найден."
    exit 1
fi

# Вывод информации о пользователе
IFS=':' read -r user _ uid gid _ home shell <<< "$user_info"
echo "Информация о пользователе $username:"
echo "UID: $uid"
echo "Группа: $gid"
echo "Домашняя директория: $home"
echo "Шелл: $shell"

# Вывод списка групп
groups=$(groups "$username")
echo "Группы: $groups"

# Запрос на изменение параметров
echo "Что вы хотите изменить? (uid, домашнюю директорию, группу)"
read -p "Введите ваш выбор: " change_option

case $change_option in
    uid)
        while true; do
            read -p "Введите новый UID: " new_uid
            if ! id -u "$new_uid" >/dev/null 2>&1; then
                break
            else
                echo "UID $new_uid уже занят. Попробуйте другой."
            fi
        done
        echo "Итоговая команда: usermod -u $new_uid $username"
        ;;
    домашнюю директорию)
        read -p "Введите новую домашнюю директорию: " new_home
        read -p "Переместить текущую домашнюю директорию? (y/n): " move_home
        if [ "$move_home" == "y" ]; then
            echo "Итоговая команда: usermod -d $new_home -m $username"
        else
            echo "Итоговая команда: usermod -d $new_home $username"
        fi
        ;;
    группа)
        read -p "Введите новую группу: " new_group
        read -p "Меняем основную группу? (y/n): " change_primary
        if [ "$change_primary" == "y" ]; then
            echo "Итоговая команда: usermod -g $new_group $username"
        else
            echo "Итоговая команда: usermod -aG $new_group $username"
        fi
        ;;
    *)
        echo "Неверный выбор."
        ;;
esac
'''   