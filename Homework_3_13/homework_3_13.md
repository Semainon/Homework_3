### Д3 3.12. На вход скрипта подаются два аргумента. Первый аргумент - входной файл, второй - выходной файл. Скрипт должен вывести в выходной файл содержимое входного файла так, что бы каждая четная строка входного файла поменялась местами с предыдущей нечётной.

### Примечание:
- Если оба файла существуют, то скрипт завершает работу;
- Если входной файл не существует, то скрипт завершает работу.


### Терминал

```bash
[root@Zero scripts]# nano swap_lines.sh
[root@Zero scripts]# chmod +x swap_lines.sh
[root@Zero scripts]# nano input.txt
[root@Zero scripts]# cat input.txt
1
2
3
4
5
6
7
sator
arepo
tenet
opera
rotas
[root@Zero scripts]# ./swap_lines.sh
Использование: ./swap_lines.sh
Этот скрипт копирует содержимое входного файла в выходной файл, меняя местами четные и нечетные строки.
Если входной файл не существует или выходной файл уже существует, скрипт завершает работу.
Введите путь к входному файлу: input.txt
Введите путь к выходному файлу: output.txt    
Содержимое входного файла успешно записано в выходной файл 'output.txt'.
Завершение работы скрипта...
[root@Zero scripts]# cat output.txt
2
1
4
3
6
5
sator
7
tenet
arepo
rotas
opera

# тестируем работу скрипта, когда оба файла существуют 
[root@Zero scripts]# ./swap_lines.sh
Использование: ./swap_lines.sh
Этот скрипт копирует содержимое входного файла в выходной файл, меняя местами четные и нечетные строки.
Если входной файл не существует или выходной файл уже существует, скрипт завершает работу.
Введите путь к входному файлу: input.txt
Введите путь к выходному файлу: output.txt
Ошибка: Выходной файл 'output.txt' уже существует.
Завершение работы скрипта...


# тестируем работу скрипта, когда входной файл не существует 
[root@Zero scripts]# ./swap_lines.sh
Использование: ./swap_lines.sh
Этот скрипт копирует содержимое входного файла в выходной файл, меняя местами четные и нечетные строки.
Если входной файл не существует или выходной файл уже существует, скрипт завершает работу.
Введите путь к входному файлу: nofile 
Ошибка: Входной файл 'nofile' не существует.
Завершение работы скрипта...



```


### swap_lines.sh

```bash
#!/bin/bash

# Устанавливаем параметры для надежного выполнения скрипта
set -Eeuo pipefail

# Функция для вывода справки
usage() {
    cat << EOF
Использование: $0
Этот скрипт копирует содержимое входного файла в выходной файл, меняя местами четные и нечетные строки.
Если входной файл не существует или выходной файл уже существует, скрипт завершает работу.
EOF
}

# Функция для обработки завершения скрипта
cleanup() {
    echo "Завершение работы скрипта..."
    exit 0
}

# Обработка сигналов для корректного завершения
trap cleanup SIGINT SIGTERM ERR EXIT

# Вывод справки
usage

# Запрос входного файла
read -p "Введите путь к входному файлу: " INPUT_FILE

# Проверка существования входного файла
if [ ! -f "$INPUT_FILE" ]; then
    echo "Ошибка: Входной файл '$INPUT_FILE' не существует."
    exit 1
fi

# Запрос выходного файла
read -p "Введите путь к выходному файлу: " OUTPUT_FILE

# Проверка существования выходного файла
if [ -f "$OUTPUT_FILE" ]; then
    echo "Ошибка: Выходной файл '$OUTPUT_FILE' уже существует."
    exit 1
fi

# Чтение входного файла и обмен строками
{
    # Считываем строки в массив
    mapfile -t lines < "$INPUT_FILE"

    # Обмен местами четных и нечетных строк
    for ((i = 0; i < ${#lines[@]}; i+=2)); do
        if [ $((i + 1)) -lt ${#lines[@]} ]; then
            echo "${lines[i + 1]}" >> "$OUTPUT_FILE"
            echo "${lines[i]}" >> "$OUTPUT_FILE"
        else
            echo "${lines[i]}" >> "$OUTPUT_FILE"  # Если нечетная строка без пары
        fi
    done
}

echo "Содержимое входного файла успешно записано в выходной файл '$OUTPUT_FILE'."
```
